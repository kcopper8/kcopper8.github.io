title: Hexo Admin Plugin 추가
tags: []
categories: []
date: 2016-04-09 23:13:00
---
사이트에 [Hexo Admin Plugin](http://jaredforsyth.com/hexo-admin/) 을 추가했다.

요 몇일 사이트를 손에 놓은 다음 다시 시작하려니 손에 왠지 잡히지 않았다. 서버를 띄우기만 해도 뭔가 시작하긴 할 것 같은데 인터넷 서핑이나 트위터 눈팅을 하면서 미루다 보니 시간이 한참 흘러 있었다. 아무래도 콘솔을 열고 서버를 띄우고 마크다운 파일을 만들고 에디터를 여는 일련의 동작도 꽤나 번거로운 작업이어서 그런가보다 생각이 들었다.

사이트에 글을 쓰는 과정을 좀 더 편하게 만들어 둬야 할 필요성을 느꼈다.

떠오른 아이디어가 두 개가 있는데, 그 중 하나는 관리툴이 있으면 어떨까 하는 거였다. 그런 건 왠지 이미 플러그인으로 있을 것 같았고, 역시 찾아보니 있었다.

[Hexo Admin Plugin](http://jaredforsyth.com/hexo-admin/)

## 기능들

기능들이 여러가지 있는데, [Demo 페이지](http://jaredforsyth.com/hexo-admin/admin/#/) 에서 대부분 사용해 볼 수 있다.

인상 깊은 것 몇 가지만 적어 봐야겠다.

### 글 목록 보기
![글 목록 보기 화면 캡처 이미지](http://jaredforsyth.com/hexo-admin/images/screenshot-1.png)

글 목록과 내용을 보여준다. Draft 인지 여부도 보여준다. 여기서 새 글을 추가하거나 기존 글 수정으로 들어갈 수 있다.

### 글 수정
![글 수정 화면 캡처 이미지](http://jaredforsyth.com/hexo-admin/images/screenshot-2.png)

글을 편집할 수 있는 마크다운 에디터를 제공한다. 마크다운을 렌더링해 실시간으로 HTML 로 변환해서 보여주는데 편하다. 그렇잖아도 atom 에 마크다운 에디터를 설치해야 하나 생각하던 차에 딱 필요할 정도의 기능을 사용할 수 있어서 좋다.

또한 publish/unpublish 기능이 있다. 글을 draft 상태로 되돌리거나 publish 시키는 게 여기서 버튼 하나로 할 수 있다. 아주 편하다.

만들어둔 페이지가 있으면 페이지도 동일한 마크다운 에디터로 편집할 수 있다.

### Deploy 기능
Demo 에는 보이지 않는 기능인데 Deploy 기능을 탑재하고 있는 모양이다. 이걸로 deploy 도 할 수 있는 듯 하다. 문제는 사이트 말고 소스를 central 로 push 하는 건 이걸로 안 될 것 같다는 데 있다. [관련 글](http://kcopper8.github.io/2016/03/27/%EB%B0%B0%ED%8F%AC-%EC%A0%95%EB%A6%AC/)

이걸 해결하기 전까지는 안쓸 것 같지만 쓰면 편할 것 같다. 아무래도 소스 배포를 hexo deploy plugin 으로 만들지 않으면 안 될 것 같다. 알만한 사람에게 좀 물어볼까.

까지 생각하고 테스트 삼아 한번 실행해봤는데 설정이 필요한 것 같다. `_config.yml` 파일에 admin.deployCommand 에다가 설정해준 커맨드를 실행시켜주는 방식인 것 같다. 여기서 소스 관리까지 한번에 실행시키게 커맨드를 등록하면 될테니 소스 관리는 쉽게 해결될 것 같다.

문제는 소스 관리용 인증을 어떻게 둘 것인지 아직 결정 못했기 때문에 이거 사용은 좀 미뤄둬야겠다.


## 아쉬운 점

### (해결됨) Draft 글 생성 후 편집시 버그

draft 상태에서 글 작성하는 도중에 서버에서 `Unhandled rejection TypeError: Cannot read property 'source' of undefined` 라는 오류가 난다. 일어나는 타이밍을 보니 글이 자동 저장될 때마다 발생하는 것 같다. 

처음에는 특별히 문제될만한 게 없어 보여 신경쓰지 않았는데, 글 목록 페이지로 돌아갔더니 난리가 났다. 작성중인 글과 동일한 제목에 맨 뒤에 숫자만 더 붙은 글이 7개가 더 만들어져 있다. 오류가 날 때마다 글이 하나씩 더 생긴 모양이다. 특별히 작성하던 글이 날아가진 않았으니 글 다 쓰고 나서 살펴봐야겠다.

**2016.07.10 추가:** 우연히 이 현상이 해결된 것을 발견했다. 전에 플러그인 github 이슈 페이지에서 이 버그 이야기 오가는 게 보이더니 어느새 해결된 버전이 배포된 모양이다.

### (해결됨) 글 삭제가 없음
글 삭제 기능이 아직 없다. 위 버그 덕분에 생긴 많은 draft 파일들을 하나하나 삭제해야 해서 귀찮다. [플러그인 github](https://github.com/jaredly/hexo-admin) 에 가보니 삭제 기능을 요구하는 사람들이 많고 Pull Request 도 이미 들어온 것 같다. 머지 않아 추가될 것 같다.

**2016.07.10 추가:** pull request 가 머지된 것 같다.

## 그 외 잡상
글 적기 전까지 뭔가 이거 꼭 적어둬야지 하던 게 있었는데 글 적는 사이에 까먹었다.